@page
@model IndexModel
@{
    ViewData["Title"] = "Home page";
}

<script type="text/javascript" src="/js/eventsource.js"></script>

<div class="row">
    <div class="col">
        <h5>Default</h5>
        <div id="dataview-default"></div>
    </div>
    <div class="col">
        <h5>Polyfill</h5>
        <div id="dataview-polyfill"></div>
    </div>
</div>

<script type="text/javascript" src="js/token.js"></script>
<script type="text/javascript" src="/js/polyfill-sse.js"></script>
<script type="text/javascript" src="/js/default-sse.js"></script>

<script>

let xhr = new XMLHttpRequest();
xhr.open('GET', '/token');

xhr.onreadystatechange = function () {
        const DONE = 4;
        const OK = 200;
        if (xhr.readyState === DONE) {
                if (xhr.status === OK) {
                        console.log(xhr.responseText);
                        PolyfillSseStart("dataview-polyfill", xhr.responseText);
                } else {
                        console.log('Error: ' + xhr.status);
                }
        }
};

// Send the request to send-ajax-data.php
xhr.send(null);


// DefaultSseStart("dataview-default");
</script>